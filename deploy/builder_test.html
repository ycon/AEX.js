<html>
<head>
<!--[if IE]>
<script type="text/javascript" src="https://getfirebug.com/firebug-lite.js"></script>
<![endif]-->


<script type="text/javascript" src="jquery.min.js"></script>
<script type="text/javascript" src="AE.js"></script>
<script type="text/javascript">

window.requestAnimationFrame || (window.requestAnimationFrame = 
	window.webkitRequestAnimationFrame || 
	window.mozRequestAnimationFrame    || 
	window.oRequestAnimationFrame      || 
	window.msRequestAnimationFrame     || 
	function(callback, element) {
		return window.setTimeout(function() {
			callback(+new Date());
	}, 1000 / 60);
});


</script>

</head>
<body>


</body>

<script type="text/javascript">

$(document).ready(function(){
	

	
	$.get("tests/transform_test.js",function(data) {
		
		var animator = AE.AEBuilder.build(data);
		
		var comp = animator.item;
		var renderer = new AE.DomRenderer(comp);
		
		console.log(AE.Browser);
		
		console.log(animator);
		
		animator.clamp = false;
		
		$('body').append(renderer.element);
		
		var animStart = new Date().getTime();
		var play = true;
		var pauseOffset = 0;
		var loop = function(t){
			
			if (play){
				animator.animate(((t-animStart)+pauseOffset)/1000);
				renderer.render();
				
				requestAnimationFrame(loop);
			} else {
				pauseOffset = t-animStart;
			}
			
		}
		
		loop(animStart);
		
		
		$('body').click(function(){
			if(play){
				play = false;
			} else {
				play = true;
				animStart = new Date().getTime();
				loop(animStart);
			}
		});
		
		
		//console.log(data,animator);
	},"json");
			
			
			
	


	
	
	
	
	
});




</script>



</html>